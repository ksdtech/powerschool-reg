function loadWidget(e,t,i,s,a){var n=!1;return t.attr("data-validation",i),$j(t).addClass("noIndicator"),"psNumWidget"==e?n=loadPsNumWidget(t,s):"psDateWidget"==e&&(n=loadPsDateWidget(t,s,a)),n}function loadPsNumWidget(e,t){return"undefined"!=typeof e&&e.length&&(readyDataValidation(e),require(["psNumWidget"],function(e){e.initializeNumWidget()}),t&&$j(e).addClass("unvalidated")),!0}function loadPsDateWidget(e,t,i){return"undefined"!=typeof e&&e.length&&(readyDataValidation(e),void 0!=i&&"noformat"==i&&$j(e).addClass("noformat"),require(["psDateValidate"],function(e){psDateValidate=e,psDateValidate.initializeDateValidate()}),t&&$j(e).addClass("unvalidated"),$j("input.psDateWidget").closest("form").addClass("validatedForm"),$j("input.psDateWidget.psDateHighlight").length&&$j.getScript("/scripts/psDateWidgetHighlight.js",function(){})),!0}function readyDataValidation(e){var t=$j.parseJSON(e.attr("data-validation"));null!=t.type&&("number"==t.type?($j(e).addClass("psNumWidget"),null!=t.minValue&&$j(e).attr("data-minvalue",t.minValue),null!=t.maxValue&&$j(e).attr("data-maxvalue",t.maxValue),null!=t.isinteger&&"true"==t.isinteger&&$j(e).attr("data-isinteger","true")):"date"==t.type&&($j(e).addClass("psDateWidget"),null!=t.minValue&&$j(e).attr("data-mindate",t.minValue),null!=t.maxValue&&$j(e).attr("data-maxdate",t.maxValue)),null!=t.minlength&&$j(e).attr("minlength",t.minlength),null!=t.maxlength&&$j(e).attr("maxlength",t.maxlength),"true"==t.required&&$j(e).addClass("required"))}function handleTextAreaMaxLength(e,t){if(t>0){var i=e.attr("id");i||(i="__maxlength_textarea"+__maxlength_count,e.attr("id",i));var s="__maxlength_count"+__maxlength_count,a="psx.js.scripts.psbehaviors.n_characters_left";t>1e3&&(a="psx.js.scripts.psbehaviors.about_n_characters_left"),e.after("<p class='textareaCounter'>"+pss_text(a,["<span id='"+s+"'>"+t+"</span>"])+"</p>"),__maxlength_tracker[i]=function(){var i=e.get(0);maxlength(i,t,s)},__maxlength_tracker[i](),e.focus(function(){__maxlength_curFocus=$j(this).attr("id")}),e.blur(function(){__maxlength_curFocus==$j(this).attr("id")&&(__maxlength_curFocus=null)}),__maxlength_count++}}function jsLazyLoader(){if($j('textarea[class^="maxlength"]').length&&$j('textarea[class^="maxlength"]').each(function(){var e=$j(this),t=e.attr("class").split(/\s+/),i=0;$j.each(t,function(e,t){i=t.substr(9)}),handleTextAreaMaxLength(e,i)}),$j("textarea[maxlength]").length&&$j("textarea[maxlength]").each(function(){var e=$j(this);handleTextAreaMaxLength(e,e.attr("maxlength"))}),__maxlength_count&&setInterval(function(){__maxlength_curFocus&&__maxlength_tracker[__maxlength_curFocus]&&__maxlength_tracker[__maxlength_curFocus]()},250),0==$j('body[data-validation="exclude"]').length){$j("form:not(.noSubmitLoading)").addClass("submitOnce"),$j("form.submitOnceCond").removeClass("submitOnceCond");var e=null;require(["psValidationFunctions"],function(e){validationFunctions=e,null!=e&&validationFunctions.parseJSONrules($j('[data-validation]:not("[type=hidden]")')),$j("input.required").length&&(require(["psRequired"],function(e){psRequired=e,psRequired.initializeRequired()}),$j("input.required").closest("form").addClass("validatedForm"),$j("input.required:not(.tagged), select.required:not(.tagged)").not(".noIndicator").addClass("unvalidated").addClass("tagged").after("<em>*</em>"),writeToLegend("<em>*</em> - "+pss_text("psx.js.scripts.psbehaviors.required"),"psRequired")),$j("input.psNumWidget").length&&(require(["psNumWidget"],function(e){psNumWidget=e,psNumWidget.initializeNumWidget()}),$j("input.psNumWidget").closest("form").addClass("validatedForm"),$j("input.psNumWidget").addClass("unvalidated")),$j("input.psTextWidget").length&&(require(["psTextWidget"],function(e){psTextWidget=e,psTextWidget.initializeTextWidget()}),$j("input.psTextWidget").closest("form").addClass("validatedForm"),$j("input.psTextWidget").addClass("unvalidated")),$j("input.psDateWidget").length&&(require(["psDateWidget"],function(e,t){psDateWidget=e,i18nStringToDate=psDateWidget.i18nStringToDate,require(["psDateValidate"],function(e){psDateValidate=e,validateDate=psDateValidate.validateDate,validateDateAfterMin=psDateValidate.validateDateAfterMin,validateDateBeforeMax=psDateValidate.validateDateBeforeMax,psDateValidate.initializeDateValidate()})}),$j("input.psDateWidget").closest("form").addClass("validatedForm"),$j("input.psDateWidget").addClass("unvalidated"),0==$j("#validationIcons").find("#calendarIcon").length&&writeToLegend('<img src="/images/icon-calendar.png" id="calendarIcon"></img> - '+pss_text("psx.js.scripts.psbehaviors.date_entry"),"psDateWidget")),$j("table#textMaskTable").length&&require(["psTextMaskAdministration"],function(e){psTextMaskAdmin=e,psTextMaskAdmin.init()}),$j("form.validatedForm").length?(require(["psFormValidate"],function(e){psFormValidate=e,psFormValidate.initializeFormValidate(),updateFeedback_Alert=psFormValidate.updateFeedback_Alert,validateForm=psFormValidate.validateForm,getListOfErrors=psFormValidate.getListOfErrors,validatedSubmitHandler=psFormValidate.validatedSubmitHandler,setFeedback_Alert=psFormValidate.setFeedback_Alert}),$j("form.validatedForm").each(function(){var e=$j(this).attr("onsubmit");$j(this).attr("data-onsubmit",e),$j(this).removeAttr("onsubmit"),$j(this).removeClass("submitOnce")})):$j(".unvalidated").length&&require(["psFormValidate"],function(e){psFormValidate=e,updateFeedback_Alert=psFormValidate.updateFeedback_Alert,getListOfErrors=psFormValidate.getListOfErrors,setFeedback_Alert=psFormValidate.setFeedback_Alert})})}$j("input.psDateWidget.psDateHighlight").length&&$j.getScript("/scripts/psDateWidgetHighlight.js",function(){}),$j('input[class^="timeEntry"]').length&&($j("input.timeEntry").length&&writeToLegend('<img src="/images/img/icon-time.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry"),"timeEntry"),$j("input.timeEntry5").length&&writeToLegend('<img src="/images/img/icon-time-5.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry_x",[pss_text("psx.js.scripts.psbehaviors.interval_five")]),"timeEntry5"),$j("input.timeEntry05To22").length&&writeToLegend('<img src="/images/img/icon-time-5.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry_x",[pss_text("psx.js.scripts.psbehaviors.interval_five")]),"timeEntry5"),$j("input.timeEntry15").length&&writeToLegend('<img src="/images/img/icon-time-15.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry_x",[pss_text("psx.js.scripts.psbehaviors.interval_fifteen")]),"timeEntry15"),$j("input.timeEntry30").length&&writeToLegend('<img src="/images/img/icon-time-30.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry_x",[pss_text("psx.js.scripts.psbehaviors.interval_thirty")]),"timeEntry30"),$j("input.timeEntryHourOnly").length&&writeToLegend('<img src="/images/img/icon-time-60.png"</img> - '+pss_text("psx.js.scripts.psbehaviors.time_entry_x",[pss_text("psx.js.scripts.psbehaviors.interval_hour")]),"timeEntry60")),lazyLoadTableToGrid(),$j("textarea.psRTE").length&&!psRTELoaded&&$j.getScript("/scripts/markitup/jquery.markitup.js",function(){$j.getScript("/scripts/markitup/sets/html/set.js",function(){$j.getScript("/scripts/singleField_translation.js",function(){initPsRTE(),$j("head").append("<link>"),skinsCSS=$j("head").children(":last"),skinsCSS.attr({rel:"stylesheet",type:"text/css",href:"/scripts/markitup/skins/simple/style.css"}),$j("head").append("<link>"),setCSS=$j("head").children(":last"),setCSS.attr({rel:"stylesheet",type:"text/css",href:"/scripts/markitup/sets/html/style.css"}),psRTELoaded=!0})})}),$j('select[radioDivPre], input[type="checkbox"].radioDivPre, input[type="radio"].radioDivPre').length&&$j.getScript("/scripts/psRadioDiv.js",function(){}),$j("ul.inlineDiff").length&&($j.getScript("/scripts/diff.js",function(){}),$j("ul.inlineDiff").each(function(){var e=$j(this),t=e.find("li");if(2==t.length){e.hide();var i,s,a=$j(t[0]).attr("title");s=a?pss_text("psx.js.scripts.psbehaviors.deleted_xx",[a]):pss_text("psx.js.scripts.psbehaviors.deleted");var n=$j(t[1]).attr("title");i=n?pss_text("psx.js.scripts.psbehaviors.added_xx",[n]):pss_text("psx.js.scripts.psbehaviors.added"),wDiffHtmlDeleteStart='<del title="'+s+'">',wDiffHtmlDeleteEnd="</del>",wDiffHtmlInsertStart='<ins title="'+i+'">',wDiffHtmlInsertEnd="</ins>";var o=$j(t[0]).html(),r=$j(t[1]).html(),d="<p>"+WDiffString(o,r)+"</p>";e.after($j(d))}})),$j('input[type="checkbox"].selectAllFor').length&&$j('input[type="checkbox"].selectAllFor').each(function(e,t){var i=$j(t),s=i.attr("data-target");s&&i.click(function(){$j(s).find(":checkbox").prop("checked",this.checked)}),i.hasClass("startSelected")&&(i.prop("checked","true"),$j(s).find(":checkbox").prop("checked","true"))}),$j("button.next, a.button.next").length&&dropPointySubElements($j("button.next, a.button.next")).append("<em>&nbsp;</em>"),$j("button.prev, a.button.prev").length&&dropPointySubElements($j("button.prev, a.button.prev")).prepend("<em>&nbsp;</em>"),$j(".autoReloadPage").length&&require(["psReloader/psReloader-min"],function(e){e.init()}),$j(".tlistCollectionTable").length&&require(["tlistCollectionTable"],function(e){e.init()}),$j("table[data-pstablefilter]").length&&require(["psTableFilter"],function(e){psTableFilter=e,psTableFilter.init()}),$j(".psFilePicker").length&&require(["psFilePicker"],function(e){psFilePickerWidget=e,psFilePickerWidget.initializeFilePicker()}),$j(".watchDirtyState").length&&require(["psDirtyStateController"],function(e){var t=$j("html").data("dirty_state_controller");t||($j("html").data("dirty_state_controller",e),e.init())})}function restoreSession(e,t){if(!sessionStorage.restore)return restoreSessionBox.hide(),void sessionStorage.clear();if(sessionStorage.removeItem("timedOut"),"true"!==sessionStorage.framedPage)return t||void 0===sessionStorage.url||null===sessionStorage.url?(restoreSessionBox.hide(),sessionStorage.clear(),void window.location.reload()):(window.location=sessionStorage.url,void sessionStorage.clear());var i=parent.document.getElementById("frameContent")?parent.document.getElementById("frameContent"):parent.document.getElementsByName("content")[0];if(void 0!==sessionStorage.url&&null!==sessionStorage.url){if(void 0!==sessionStorage.rns&&null!==sessionStorage.rns){var s=sessionStorage.rns.split(",");$j(s).each(function(e,t){if(void 0!==t){var i=sessionStorage.frameContentUrl;-1===i.indexOf("?"+t)&&-1===i.indexOf("&"+t)&&(sessionStorage.frameContentUrl+=-1===i.indexOf("?")?"?"+t+"="+sessionStorage.getItem(t):"&"+t+"="+sessionStorage.getItem(t))}})}return window.location=sessionStorage.url,void sessionStorage.removeItem("url")}if(void 0!==i&&null!==i){if(t)return void sessionStorage.clear();i.src=sessionStorage.frameContentUrl,sessionStorage.clear()}}function lazyLoadTableToGrid(){$j("table.tableToGrid").length&&!psTableToGridLoaded&&($j(".tableToGrid").each(function(e,t){$j(t).hide();var i=$j('<div class="tableToGridLoadingImage" style="height:100%; padding:100px;"><img src="/images/img/jquery/ui-anim_basic_16x16.gif" /> <strong> '+pss_text("psx.common.loading")+"</strong> </div></div>");$j(t).before(i)}),$j.getScript("/scripts/psTableToGridWidget.js",function(){}),psTableToGridLoaded=!0)}function dropPointySubElements(e){var t=[];return e.each(function(e,i){var s=$j(i),a=!1;s.find("em").each(function(e,t){var i=$j(t);"&nbsp;"==i.html()&&(a=!0)}),a||t.push(i)}),$j(t)}function initPsRTE(){var e=$j(".psRTE");e.each(function(e,t){var i={nameSpace:"html",onShiftEnter:{keepDefault:!1,replaceWith:"<br />\n"},onCtrlEnter:{keepDefault:!1,openWith:"\n<p>",closeWith:"</p>\n"},onTab:{keepDefault:!1,openWith:"    "},previewInWindow:"width=800, height=600, resizable=yes, scrollbars=yes",markupSet:[{name:"Heading 1",key:"1",openWith:'<h1(!( class="[![Class]!]")!)>',closeWith:"</h1>",placeHolder:"Your title here..."},{name:"Heading 2",key:"2",openWith:'<h2(!( class="[![Class]!]")!)>',closeWith:"</h2>",placeHolder:"Your title here..."},{name:"Heading 3",key:"3",openWith:'<h3(!( class="[![Class]!]")!)>',closeWith:"</h3>",placeHolder:"Your title here..."},{name:"Heading 4",key:"4",openWith:'<h4(!( class="[![Class]!]")!)>',closeWith:"</h4>",placeHolder:"Your title here..."},{name:"Heading 5",key:"5",openWith:'<h5(!( class="[![Class]!]")!)>',closeWith:"</h5>",placeHolder:"Your title here..."},{name:"Heading 6",key:"6",openWith:'<h6(!( class="[![Class]!]")!)>',closeWith:"</h6>",placeHolder:"Your title here..."},{name:"Paragraph",openWith:'<p(!( class="[![Class]!]")!)>',closeWith:"</p>"},{separator:"---------------"},{name:"Bold",key:"B",openWith:"<strong>",closeWith:"</strong>"},{name:"Italic",key:"I",openWith:"<em>",closeWith:"</em>"},{name:"Stroke through",key:"S",openWith:"<del>",closeWith:"</del>"},{name:"Underline",key:"U",openWith:'<span style="text-decoration: underline">',closeWith:"</span>"},{separator:"---------------"},{name:"Ul",openWith:'<ul class="text">\n',closeWith:"</ul>\n"},{name:"Ol",openWith:'<ol class="text">\n',closeWith:"</ol>\n"},{name:"Li",openWith:"<li>",closeWith:"</li>"},{separator:"---------------"},{name:"Picture",key:"P",replaceWith:'<img src="[![Source:!:http://]!]" alt="[![Alternative text]!]" />'},{name:"Link",key:"L",openWith:'<a href="[![Link:!:http://]!]"(!( title="[![Title]!]")!)>',closeWith:"</a>",placeHolder:"Your text to link..."},{separator:"---------------"},{name:"Box",replaceWith:'\n<div class="box-round">\n    <h2>Your title here...</h2>\n    <p>Your content here...</p> \n</div>\n'},{name:"Table",replaceWith:'\n<!-- This is a standards driven table. there are no styles, borders, widths and there is a header row--> \n   <table border="0" cellpadding="0" cellspacing="0" class="grid" id="tableUniqueID"> \n   <CAPTION>This text appears above the table</CAPTION>\n   <thead> \n     <tr> \n       <th>H1 content</th> \n       <th>H2 content</th> \n       <th>H3 content</th> \n     </tr> \n   </thead> \n   <tfoot> \n     <tr> \n       <td colspan="3">This will display at the bottom of the table. Ideal for legends.</td> \n         </tr> \n   </tfoot> \n   <tbody> \n     <tr> \n       <td>R1C1 content</td> \n       <td>R1C2 content</td> \n       <td>R1C3 content</td> \n     </tr> \n     <tr> \n       <td>R2C1 content</td> \n       <td>R2C2 content</td> \n       <td>R2C3 content</td> \n     </tr> \n    </tbody> \n   </table> \n'}]},s=$j(t);if(s.hasClass("psRTESearch")){i=$j.extend(!0,{},i);var a=i.markupSet;a.push({name:"Translation Hints",call:function(){var e=$j(t).attr("tolang"),i=$j($j(t).attr("fromlang")).val(),s=$j(e).val();handleSelectedText(i,s)}})}s.markItUp(i)})}function initAccordionWizard(e,t){var i=$j(".accordion.wizard"),s="",a="",n="",o="",r="",d="",l="",c="",p="",u="",h=pss_text("psx.js.scripts.psbehaviors.wizstep"),g=pss_text("psx.js.scripts.psbehaviors.wizprevious"),m=pss_text("psx.js.scripts.psbehaviors.wiznext");"rebuild"==t&&(e.find(".button-row-wizard").remove(),e.removeData("accWizInitialized"),e.accordion("destroy"),e.accordion()),i.each(function(e,t){a=$j(this),a.data("accWizInitialized")||(a.attr("id").length?s=a.attr("id"):(s="accWiz"+e,a.attr("id",s)),l=a.find(".ui-accordion-content"),d=a.find(".ui-accordion-header"),c=l.length,d.each(function(e){p=e+1,0==$j(this).find(".wizStep").length&&$j(this).prepend('<span class="wizStep">'+h+" "+p+": </span>")}),l.each(function(e){p=e+1,$j(this).append('<div class="button-row-wizard">					<p><span class="thisStep">'+p+'</span> / <span class="totStep">'+c+"</span></p>					</div>"),0!==e&&$j(this).find(".button-row-wizard").prepend('<button type="button" class="prev">'+g+"</button>"),e!=c-1&&$j(this).find(".button-row-wizard").append('<button type="button" class="next">'+m+"</button>")}),a.data("accWizInitialized",!0))}),$j(document).data("accWizBtnsInitialized")||$j(document).on("click",".accordion.wizard button, .accordion.wizard h3",function(){n=$j(this),o=n.closest(".accordion.wizard"),r=o.accordion("option","active"),overrideFn=o.data("accWizOverride"),(!overrideFn||overrideFn(o,r,n))&&($j(this).hasClass("prev")&&o.accordion("option","active",r-1),$j(this).hasClass("next")&&o.accordion("option","active",r+1))}),$j(document).data("accWizBtnsInitialized",!0)}function initBehaviors(){jsLazyLoader(),$j("div.tabs").tabs(),$j(".accordion").accordion(),initAccordionWizard(),$j(document).on("click",".psDialog button.cancel",function(){psDialogClose()}),$j("fieldset > div:odd:visible").addClass("alt"),$j("fieldset > div:even:visible").removeClass("alt"),$j(".bd tr:even").addClass("alt"),$j(".linkClose a:not(.noClose)").click(function(){psDialogClose()}),$j(".dialog, .dialogC, .dialogM, .dialogR, .dialogF, .dialogDiv, .dialogDivC, .dialogDivM, .replaceNext").css("visibility","visible");var e=".dialog, .dialogC, .dialogM, .dialogR, .dialogF, .dialogDiv, .dialogDivC, .dialogDivM";if($j(e).each(function(){var e=$j(this).attr("href");$j(this).attr("href",""),""==e&&(e=$j(this).attr("dialogContent")),e&&$j(this).attr("dialogContent",e)}),radioSliderLoaded||($j("input.radioSlider").each(function(){var e=$j(this),t=e.attr("id"),i=e.prop("checked"),s=t+"Label",a=e.attr("data-text-on"),n=e.attr("data-text-off");a||(a=pss_text("psx.js.scripts.psbehaviors.on")),n||(n=pss_text("psx.js.scripts.psbehaviors.off")),e.after('<label for="'+t+'" class="radioSlider" id="'+s+'"><span class="txtOn">'+a+'</span><em>&nbsp;</em><span class="txtOff">'+n+"</span></label>"),radioSliderState(t,i),isIEBelow(9)&&$j("label[for="+t+"]").click(function(){var e=$j(this).attr("for"),t=$j("#"+e);t.is(":checked")?t.prop("checked","false"):t.prop("checked","true")})}),radioSliderLoaded=!0),$j("input.radioSlider").bind(isIEBelow(9)?"propertychange":"change",function(){var e=$j(this).attr("id"),t=$j(this).prop("checked");radioSliderState(e,t)}),dataInjection(),void 0!==typeof Storage){if(sessionStorage.timedOut){if("true"===sessionStorage.framedPage){var t=sessionStorage.frameContentUrl;t=t.substring(t.indexOf(getPortal())),t.indexOf("?")>-1&&(t=t.substring(t.indexOf("?")))}else{var t=sessionStorage.url;t=t.substring(t.indexOf(getPortal())),t.indexOf("?")>-1&&(t=t.substring(t.indexOf("?")))}var i=!1;$j.ajax({url:"/ws/session/check-timedout-user",type:"POST",data:JSON.stringify({excluded_path:{path:t,uid:sessionStorage.uid}}),contentType:"application/json; charset=utf-8",dataType:"json",cache:!1,success:function(e){sessionStorage.correctUser=e.ValidUser.valid,sessionStorage.excludedPage=e.ValidUser.excluded,0===$j("#sessionrestore").length&&displayReanimateSessionBanner()},statusCode:{401:function(){}},error:function(){}})}sessionStorage.restore&&restoreSession(!0,"true"===sessionStorage.excludedPage)}}function displayReanimateSessionBanner(){"true"===sessionStorage.correctUser?(restoreSessionBox=$j("<div />",{id:"sessionrestore",style:"display: none"}),sessionRestoreContainer=$j("<div/>",{id:"sessionRestoreBox"}),"true"===sessionStorage.framedPage&&"true"===sessionStorage.excludedPage||"false"===sessionStorage.excludedPage?(sessionRestoreContainer.append($j("<h2/>",{"class":"warning",text:pss_text("psx.js.scripts.psbehaviors.reload_last_page")})),sessionRestoreContainer.append($j("<p/>",{"class":"warning",style:"width:85%",text:pss_text("psx.js.scripts.psbehaviors.would_you_like_to_reload_the_last_page_you_were_viewing")}))):(sessionRestoreContainer.append($j("<h2/>",{"class":"warning",text:pss_text("psx.js.scripts.psbehaviors.restore_selections_school_and_term")})),sessionRestoreContainer.append($j("<p/>",{"class":"warning",style:"width:85%",text:pss_text("psx.js.scripts.psbehaviors.would_you_like_to_restore_your_selections_school_and_term")}))),restoreSessionButtonRow=$j("<div/>",{"class":"buttons"}),sessionRestoreContainer.append(restoreSessionButtonRow),restoreSessionButtonRow.append($j("<button/>",{"class":"warning continueButton",text:pss_text("psx.js.scripts.psbehaviors.yes"),id:"yes",click:function(){loadingDialog(),restoreSessionBox.hide(),sessionStorage.restore=!0,$j.ajax({url:"/ws/session/restore-session?restore=true",type:"PUT",dataType:"json",cache:!1,complete:function(){restoreSession(!0,"true"===sessionStorage.excludedPage)}})}})),restoreSessionButtonRow.append($j("<button/>",{"class":"warning continueButton",text:pss_text("psx.js.scripts.psbehaviors.no"),id:"no",click:function(){sessionStorage.clear(),restoreSessionBox.hide(),$j.ajax({url:"/ws/session/restore-session?restore=false",type:"PUT",dataType:"json",cache:!1,complete:function(){restoreSession(!1),$j("#overlay").remove()}})}})),restoreSessionBox.append(sessionRestoreContainer),$j(document.body).append(restoreSessionBox),restoreSessionBox.show(),$j("body").append($j("<div/>",{id:"overlay","class":"ui-widget-overlay ui-front"})),closeLoading()):sessionStorage.clear()}function radioSliderState(e,t){t===!0||"checked"===t?$j("#"+e+"Label").addClass("on").removeClass("off"):$j("#"+e+"Label").addClass("off").removeClass("on")}function isIEBelow(e){var t=$j("html").data("ltie");return e>t&&void 0!=t?!0:!1}function setActive(){var e=$j("#activeNav").val();$j(e).addClass("selected")}function psEnableCheck(){$j("h2 input:checkbox:enabled").each(function(){var e=$j(this).prop("checked"),t=$j(this).parentsUntil(".box-round").last(),i=$j(this).parentsUntil(".box-round").next();e?(i.show(),t.removeClass("collapsed").addClass("toggle expanded")):(i.hide(),t.removeClass("expanded").addClass("toggle collapsed"))})}function psToggle(){var e=$j(this).hasClass("expanded");e?(hideCollapseClasses($j(this)),hideCollapseText($j(this))):(showExpandClasses($j(this)),showExpandText($j(this))),toggleTarget($j(this))}function initToggle(){$j(".toggle.collapsed").each(function(e){hideCollapseTarget($j(this))})}function psToggleAll(e,t){var i=t+" .toggle";"expand"==e?$j(i).each(function(){showExpandClasses($j(this)),showExpandText($j(this)),showExpandTarget($j(this))}):"collapse"==e&&$j(i).each(function(){hideCollapseClasses($j(this)),hideCollapseText($j(this)),hideCollapseTarget($j(this))})}function toggleTarget(e){var t=e.attr("data-target");if(void 0!=t){var i=$j("#"+t);if(i.length)return void i.toggle()}e.next().toggle()}function toggleText(e,t){var i=e.attr(t);void 0!=i&&e.html(i)}function showExpandTarget(e){var t=e.attr("data-target");if(t&&void 0!=t){var i=$j("#"+t);i&&i.length&&i.show()}else e.next().show()}function hideCollapseTarget(e){var t=e.attr("data-target");if(t&&void 0!=t){var i=$j("#"+t);i&&i.length&&i.hide()}else e.next().hide()}function showExpandText(e){e&&toggleText(e,"data-text-expanded")}function hideCollapseText(e){e&&toggleText(e,"data-text-collapsed")}function showExpandClasses(e){e&&e.removeClass("collapsed").addClass("expanded")}function hideCollapseClasses(e){e&&e.removeClass("expanded").addClass("collapsed")}function goToSchool(e,t){t=t||"Schoolid";var i=$j("<form />");i.attr("action","/admin/home.html"),i.attr("method","post"),i.attr("target","_top"),i.html('<INPUT TYPE="hidden" NAME="ac" VALUE="setschool"><INPUT TYPE="hidden" NAME="'+t+'" VALUE="'+e+'">'),$j("html").append(i),i.submit()}function goToTeacherSchool(e,t){t=t||"Schoolid";var i=$j("<form />");i.attr("action","/teachers/home.html"),i.attr("method","post"),i.attr("target","_top"),i.html('<INPUT TYPE="hidden" NAME="ac" VALUE="setschool"><INPUT TYPE="hidden" NAME="'+t+'" VALUE="'+e+'">'),$j("html").append(i),i.submit()}function goToTerm(e,t,i){i=i||"termid";var s=$j("<form />");s.attr("action",t),"function"==typeof goToTermTargetOverride&&goToTermTargetOverride(s,e),s.attr("method","post"),s.html('<INPUT TYPE="hidden" NAME="ac" VALUE="changeterm"><INPUT TYPE="hidden" NAME="'+i+'" VALUE="'+e+'">'),$j("html").append(s),s.submit()}function replaceNext(e){var t=$j(this).attr("href"),i=$j(this).attr("id"),s=$j(this).next().attr("id");$j(this).next().psLoad(t,function(){initBehaviors(),0||setTimeout(function(){$j("#"+s).find("select").focus()},100)}),e.preventDefault()}function fourDTableFix(){$j(".fourDTable").prepend('<tr class="hide"><td></td><td></td></tr>'),$j(".fourDTable tr:odd").addClass("alt"),$j(".fourDTable td:first-child").wrapInner("<strong />")}function blinker(e,t){$j(e).effect("pulsate",{times:t},1e3,function(){})}function shaker(e,t){$j(e).effect("shake",{times:t,distance:2,direction:"up"},100,function(){})}function psSystemFeedback(){"undefined"!=typeof feedbackEnabled&&feedbackEnabled&&0==$j("#feedbackSend").size()&&($j("body:not(body.pslogin)").append(recordingActivated?'<div id="feedbackSend" class="group"><div class="button hide" id="recordingStart">'+pss_text("psx.js.scripts.psbehaviors.recording_start")+'</div><div class="button hide" id="pageFeedback">'+pss_text("psx.js.scripts.psbehaviors.send_report")+'</div><div class="button" id="recordingStop">'+pss_text("psx.js.scripts.psbehaviors.recording_stop")+'</div><div class="button" id="commentaryAddition">'+pss_text("psx.js.scripts.psbehaviors.add_issue_comment")+'</div><div class="button" id="recordingCancel">'+pss_text("psx.js.scripts.psbehaviors.recording_cancel")+"</div></div>":'<div id="feedbackSend" class="group"><div class="button" id="recordingStart">'+pss_text("psx.js.scripts.psbehaviors.recording_start")+'</div><div class="button" id="pageFeedback">'+pss_text("psx.js.scripts.psbehaviors.send_report")+'</div><div class="button hide" id="recordingStop">'+pss_text("psx.js.scripts.psbehaviors.recording_stop")+'</div><div class="button hide" id="commentaryAddition">'+pss_text("psx.js.scripts.psbehaviors.add_issue_comment")+'</div><div class="button hide" id="recordingCancel">'+pss_text("psx.js.scripts.psbehaviors.recording_cancel")+"</div></div>"),$j("#reportIssueLink").addClass("hide"),$j("#pageFeedback").click(function(e){return feedbackwindow(),$j("#feedbackSend").remove(),$j("#reportIssueLink").removeClass("hide"),$j(this).blur(),!1}),$j("#recordingStart").click(function(e){$j("#pageFeedback, #recordingStart").addClass("hide"),$j("#recordingStop, #commentaryAddition, #recordingCancel").removeClass("hide"),$j(this).blur();var t=window.document,i=t.URL,s=t.getElementsByTagName("html")[0],a=s.innerHTML,n=window.location.search,o=submitScreenShot(a,i,n);return!1}),$j("#recordingStop").click(function(e){return recordingWindow(),$j(this).blur(),!1}),$j("#commentaryAddition").click(function(e){return commentsWindow(),$j(this).blur(),!1}),$j("#recordingCancel").click(function(e){return cancelRecording(),$j("#feedbackSend").remove(),$j("#reportIssueLink").removeClass("hide"),$j(this).blur(),recordingActivated=!1,!1}))}function clearAndResetAllErrors(e){var t=e.find(".error");t.length&&t.each(function(){clearError($j(this)),$j(this).addClass("unvalidated"),$j(this).removeClass("hasHadError")})}function clearError(e){e.removeClass("error"),e.removeClass("unvalidated");var t=findMsgBlockForElement(e,!1);1==t.length&&(t.hide(),t.html("")),updateFeedback_Alert(e,!1)}function setError(e,t){e.addClass("error"),e.addClass("hasHadError");var i=findMsgBlockForElement(e,!0);1==i.length&&(i.html(t),i.show()),updateFeedback_Alert(e,!0)}function findMsgBlockForElement(e,t){var i=getElementID(e),s=i+"_error",a=$j("#"+s);return 0==a.length&&t&&(e.parent().append("<p id ='"+s+"' class='error-message'></p>"),a=$j("#"+s)),a}function getElementID(e){var t=e.attr("id");return(null==t||""==t)&&(e.attr("id","ldv_generatedID"+generatedIdCounter++),t=e.attr("id")),t}function writeToLegend(e,t){if($j("#legend").show(),void 0!=t&&null!=t){if(_dynamicLegendItems[t])return;_dynamicLegendItems[t]="true"}$j("#validationIcons").append("&nbsp; "+e+" |")}function sendRecordingScreenShot(){var e=window.document,t=e.URL,i=e.getElementsByTagName("html")[0],s=i.innerHTML,a=window.location.search,n=submitScreenShot(s,t,a)}function submitScreenShot(e,t,i){var s="/recordingAJAX.action",a="screenshot="+escape(e);a=a+"&url="+encodeURIComponent(t),a=a+"&params="+escape(i);var n=new XMLHttpRequest;return n.open("POST",s,!1),n.setRequestHeader("Content-type","application/x-www-form-urlencoded"),n.setRequestHeader("Content-length",a.length),n.setRequestHeader("Connection","close"),n.send(a),n.responseText}function cancelRecording(){var e="/cancelRecordingAJAX.action",t=new XMLHttpRequest,i="";return t.open("POST",e,!1),t.setRequestHeader("Content-type","application/x-www-form-urlencoded"),t.setRequestHeader("Content-length",i.length),t.setRequestHeader("Connection","close"),t.send(i),t.responseText}function recordingWindow(){window.showModalDialog("/stopRecording.action","stop_recording","dialogWidth:640px; dialogHeight:500px; scroll:no;")}function commentsWindow(){window.showModalDialog("/getRecordCommentaryForm.action","add_commentary","dialogWidth:900px; dialogHeight:400px; scroll:no;")}function changeStopButton(){$j("#feedbackSend").remove(),$j("#reportIssueLink").removeClass("hide"),$j("#recordingStop, #commentaryAddition, #recordingCancel").addClass("hide"),$j("#pageFeedback, #recordingStart").removeClass("hide")}function getURLParameter(e,t){return void 0==t&&(t=location.search),unescape((RegExp(e+"=(.+?)(&|$)").exec(t)||[,null])[1])}function displayAlert(){require(["jquery","jquery.cookie"],function(e,t){var i=e.cookie("_alert_message");if(void 0!==i){e.removeCookie("_alert_message");var s=pss_text("psx.js.scripts.psbehaviors."+i);"content"in parent?parent.content.psAlert({width:"50%",message:s}):parent.psAlert({width:"50%",message:s})}})}function setUICookie(e,t){"use strict";"function"==typeof($j&&jQuery.cookie)&&jQuery.cookie(e,t,{path:"/",expires:1})}function frameStatus(e){"use strict";"off"===e?frameSet.attr("cols","0,*"):"on"===e&&frameSet.attr("cols","208,*"),top.document.getElementById("frameSet").rows=top.document.getElementById("frameSet").rows}function addUiStateSetListener(e,t){uiStateSetListeners.push({callback:e,context:t||this})}function removeUiStateSetListener(e,t){var i;for(i=uiStateSetListeners.length-1;i>=0;i--)e&&uiStateSetListeners[i].callback!==e||t&&uiStateSetListeners[i].context!==t||uiStateSetListeners.splice(i,1)}function uiStateSet(e,t,i,s,a){setUICookie(i,s),"expanded"===s?($j("body").addClass("ui"+e),$j("#btn"+e).addClass("expanded").removeClass("collapsed"),$j("#btn"+e).attr({title:t})):null===s&&($j("body").removeClass("ui"+e),$j("#btn"+e).removeClass("expanded").addClass("collapsed"),$j("#btn"+e).attr({title:t})),0!=frameSet.length&&null===s?(frameSet.addClass("ui"+e),frameStatus(a)):0!=frameSet.length&&"expanded"===s&&(frameSet.removeClass("ui"+e),frameStatus(a));var n;for(n=0;n<uiStateSetListeners.length;n++)uiStateSetListeners[n].callback.apply(uiStateSetListeners[n].context,arguments)}function initUIControls(){var e=pss_text("psx.js.scripts.psbehaviors.show_main_menu"),t=pss_text("psx.js.scripts.psbehaviors.hide_main_menu"),i=pss_text("psx.js.scripts.psbehaviors.show_header"),s=pss_text("psx.js.scripts.psbehaviors.hide_header"),a=$j('<div id="btnNoNav" class="collapsed" title="'+t+'"><em>&nbsp;</em></div>'),n=$j('<div id="btnContMax" class="collapsed" title="'+i+'"><em>&nbsp;</em></div>');0===$j("#btnNoNav",top.document).length&&$j("#content-main").prepend(a),0===$j("#btnContMax",top.document).length&&$j("#content-main, #content-lunch").prepend(n),"function"==typeof($j&&jQuery.cookie)&&("expanded"===jQuery.cookie("uiStateNav")?uiStateSet("NoNav",e,"uiStateNav","expanded","off"):uiStateSet("NoNav",t,"uiStateNav",null,"on"),"expanded"===jQuery.cookie("uiStateCont")?uiStateSet("ContMax",i,"uiStateCont","expanded"):uiStateSet("ContMax",s,"uiStateCont",null),a.click(function(){"expanded"===jQuery.cookie("uiStateNav")?uiStateSet("NoNav",t,"uiStateNav",null,"on"):uiStateSet("NoNav",e,"uiStateNav","expanded","off")}),n.click(function(){"expanded"===jQuery.cookie("uiStateCont")?uiStateSet("ContMax",s,"uiStateCont",null):uiStateSet("ContMax",i,"uiStateCont","expanded")}))}function ads(e,t,i){var s=document.getElementById(e),a=0;if(i=parseInt(i),0>i&&(t="^("+t+")",i=-1*i),document.selection)s.focus(),5==i?s.value=t:document.selection.createRange().text=99==i?t+"\n":t;else{a=s.selectionStart;var n=s.value.substring(0,a),o=s.value.substring(a),r="";5==i&&(s.value=t,n="",o=""),99==i&&"\n"!=o.substring(0,1)&&(r="\n"),"\n"==o.substring(0,1)&&(t="\n"+t),t+=r,s.value=n+t+o,"function"==typeof setSelectionRange&&setSelectionRange(s,a+t.length,a+t.length)
}"function"==typeof oResizePanel.hide&&oResizePanel.hide(),s.focus(1),"function"==typeof postSetSelection&&postSetSelection()}function logToConsole(e){window.console&&window.console.log&&console.log(e)}function dataInjection(){var e=$j("div.injectable");e.each(function(e,t){var i=$j(t),s=i.html(),a=i.attr("data-inject-location"),n=i.attr("data-inject-how");"before"===n?(i.detach(),$j("body").find(a).before(s)):"after"===n?(i.detach(),$j("body").find(a).after(s)):(elementValue||(elementValue=$j("body").find(a).html()),$j("body").find(a).html("append"===n?elementValue+" "+s:"insert"===n?s+" "+elementValue:s))})}function getPortal(){var e=window.location.pathname,t=e.indexOf("/",1);return t>0&&(e=e.substring(1,t)),e}var $j=$j||jQuery.noConflict(),psRTELoaded=!1,psTableToGridLoaded=!1,radioSliderLoaded=!1,restoreSessionBox,__maxlength_count=0,__maxlength_tracker={},__maxlength_curFocus=null,psFilePickerWidget={};if(0==$j('body[data-validation="exclude"]').length)var validationFunctions={},psDateValidate={},psDateWidget={},psFormValidate={},psNumWidget={},psRequired={},psTextWidget={},validateForm={},validateDate={},getListOfErrors={},validateDateAfterMin={},validateDateBeforeMax={},i18nStringToDate={},validatedSubmitHandler={},updateFeedback_Alert={},setFeedback_Alert={};if(blinker(".blink",20),!_messages)var _messages={};"function"!=typeof pss_get_texts&&(pss_get_texts=function(e,t){t&&_messages[t]||jQuery.ajax({async:!1,url:"/getMessages.action",data:{prefix:e,locale:get_locale()},dataType:"json",success:function(e){jQuery.each(e,function(e,t){_messages[e]=t})}})});var generatedIdCounter=1,_dynamicLegendItems={};$j(document).ready(function(){$j('form:not(#attendance) :input:visible:enabled:first:not(:button, :checkbox, :radio, [readonly="readonly"])').each(function(e,t){t.focus(),"text"==t.type&&t.select()}),initBehaviors(),setActive(),"undefined"==typeof feedbackEnabled||feedbackEnabled||$j("#reportIssueLink").remove();var e=$j("body:not(.pslogin,.frameMenu)").length;recordingActivated&&e>0&&psSystemFeedback(),psEnableCheck(),fourDTableFix(),recordingActivated&&sendRecordingScreenShot(),$j(document).on("click","a.dialog, a.dialogDiv, a.dialogDivC, a.dialogDivM, a.dialogC, a.dialogM, a.dialogR, a.dialogF",psDialog),$j(document).on("click","a.replaceNext",replaceNext),$j(document).on("click","#expand_all_changes-button",function(){psToggleAll("expand","#change_reasons_div")}),$j(document).on("click","#collapse_all_changes-button",function(){psToggleAll("collapse","#change_reasons_div")}),$j(document).on("click",".expandAll",function(){psToggleAll("expand","#content-main")}),$j(document).on("click",".collapseAll",function(){psToggleAll("collapse","#content-main")}),$j(document).on("click","h2.toggle, h3.toggle, th.toggle",psToggle),initToggle(),$j(document).on("click","button.toggle",function(){$j(this).addClass("hide").next().removeClass("hide")}),$j(document).on("click","button.toggleParent",function(){$j(this).parent().addClass("hide").prev().removeClass("hide")}),$j("button#btnSubmit.disabled").attr("disabled","true"),$j.fn.makeConfReqButton=function(){$j(this).each(function(e){var t=$j(this),i=t.html(),s=pss_text("psx.js.scripts.psbehaviors.confirm")+i,a=$j('<button type="button" id="btnConfirmProxy">'+i+"</button>"),n=$j('<button type="button" id="btnConfirmCancel">'+pss_text("psx.js.scripts.psbehaviors.cancel")+"</button>").addClass("hide");a.click(function(){"use strict";$j(this).toggleClass("hide"),$j(n).toggleClass("hide"),$j(t).toggleClass("hide")}),n.click(function(){"use strict";$j(this).toggleClass("hide"),$j(t).toggleClass("hide"),$j(a).toggleClass("hide")}),t.click(function(){"use strict";$j(this).toggleClass("hide"),$j(n).toggleClass("hide"),$j(a).toggleClass("hide")}),t.text(s).addClass("hide"),t.after(a).after(n)})};var t=$j("button.confirmationReq, a.confirmationReq");t.makeConfReqButton(),$j("form.submitOnce").submit(function(){"undefined"!=typeof submitOnce_shouldShow?submitOnce_shouldShow&&loadingDialog():loadingDialog()}),$j("form.submitOnceCond").submit(function(){submitOnce_shouldShow&&loadingDialog()}),$j("a.popWin").click(function(){var e=$j(this).attr("href");return window.open(e),!1}),$j(document).on("focus","input.massFill",function(){var e=$j(this).siblings().filter("button.btnMassFill");0===e.length&&$j(this).parent().append('<button type="button" class="btnMassFill"><span>&nbsp</span></button>')}),$j(document).on("click","button.btnMassFill",function(){var e=$j(this).siblings().filter("input").val();$j(this).parents("table").find("td:nth-child("+($j(this).parent().index()+1)+") input").val(e)}),"preview"==getURLParameter("mode")&&$j("#header a").length&&($j("#header a, #usercontext-bar a, #nav-main a").removeAttr("href"),$j("#header a, #nav-main a").css("color","grey"),$j("#userName span").css("text-decoration","line-through").css("color","gray"),$j("#header a, #nav-main a, #tools2 a").removeClass()),require(["jquery","jquery.cookie"],function(e){initUIControls()});var i=-1!=navigator.appVersion.indexOf("Mac");i?$j(".ifIsMacHide").hide():$j(".ifIsMacShow").hide(),(!("content"in parent)&&"function"==typeof parent.psAlert||"content"in parent&&"function"==typeof parent.content.psAlert)&&displayAlert();var s=-1!=navigator.appVersion.indexOf("Win");if(s?$j(".ifIsWinHide").hide():$j(".ifIsWinShow").hide(),"null"!=getURLParameter("confirm_message")){var a=getURLParameter("confirm_message"),n="psx.js.scripts.psbehaviors.confirmbanner.",a=n+a;pss_get_texts(n,a);var o=pss_text(a);$j("#feedback-message").length&&$j("#feedback-message").addClass("feedback-confirm").append("<p>"+o+"</p>").removeClass("hide")}require(["jquery","jquery.cookie"],function(e,t){e.cookie("lastHref",e(location).attr("href"),{path:"/",expires:1})})});var frameSet=$j("#frameSet",top.document),uiStateSetListeners=[],elementValue;