function on_contact_change(t){if(t>2)return!0;var n,e=0,o=["","",""];if(0==t){for(ParentPhones.load_and_sort_phones(all_phones),n=0;3>n;n++)o[n]=init_sels[n],"&nbsp;"==o[n]&&(o[n]="");e=1}else for(n=0;t>n;n++)o[n]=$j("#contact_"+(n+1)+" option:selected").val(),(""==o[n]||o[n]!=init_sels[n])&&(e=1);if(0!=e)for(n=t;3>n;n++){var r=ParentPhones.get_options(n,o);$j("#contact_"+(n+1)).html(r)}return!0}function set_form_updated(){return $j("#upd_by").val($j("#userid").val()),$j("#upd_at").val(timestamp_now()),!0}var ParentPhones=function(){function t(t){var n=0;for(n=0;n<o.length&&o[n].phone!=t;n++);return n>=o.length&&(o[n]={phone:t,priority:0}),n}function n(n,e){var r=t(n);o[r].priority+=e}function e(){o.sort(function(t,n){return t.priority==n.priority?0:t.priority>n.priority?-1:1})}var o=new Array;return{load_and_sort_phones:function(t){for(var o=0;o<t.length;o+=2){alert("sort_phones plist["+(o+1)+"] = "+t[o+1]),alert("sort_phones plist["+o+"] = "+t[o]);var r=t[o+1],i=t[o],a=0;null!=i&&(i=i.toLowerCase(),("mother_cell"==i||"mother2_cell"==i)&&(a+=4),("father_cell"==i||"father2_cell"==i)&&(a+=2),("mother_work_phone"==i||"mother2_work_phone"==i)&&(a+=1)),n(r,a)}e()},get_options:function(t,n){init_sels[t]="";for(var e='<option value="">Choose a phone number:</option>',r=0;r<o.length;r++){for(var i=o[r].phone,a=0;t>a;a++)if(i==n[a]){i=null;break}null!=i&&(e+='<option value="'+i+'"',i==n[t]&&(e+=' selected="selected"',init_sels[t]=n[t]),e+=">"+i+"</option>")}return e}}}(),all_phones,init_sels;$j(document).ready(function(){$j("#attSubmitButton").bind("click",function(t){$j("#upd_by").hasClass("disabled")||set_form_updated()}),$j("#admin_update").bind("click",function(){$j("#admin_update").attr("checked")&&set_form_updated()}),$j(".private").hide(),on_contact_change(0)});