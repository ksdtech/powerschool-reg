function init_checklist(t){$j("#"+t.id).hide();for(var e=$j("#"+t.id).val().split(/[, \t\r\n]+/),i=e.length,n=0;i>n;n++){var c=e[n].replace(/^\s+|\s+$/g,"").toLowerCase();""!=c&&$j("."+t.id+"_list").each(function(){$j(this).val().toLowerCase()==c&&$j(this).attr("checked","checked")})}}function pack_checklist(t){var e="";return $j("."+t.id+"_list:checked").each(function(){var t=$j(this).val();""!=t&&(""!=e&&(e+=","),e+=t.toLowerCase())}),$j("#"+t.id).val(e),e}function select_one(t,e){if(""==e)return-1;for(var i=t.options,n=i.length,c=0;n>c;c++)if(i[c].value==e)return i[c].selected=!0,c;return-1}function init_multi_select(t,e){for(var i=0,n=e.split(/[, \t\r\n]+/),c=n.length,a=0;c>a;a++){var s=n[a];select_one(t,s)>=0&&(i+=1)}return i}function pack_multi_select(t){for(var e="",i=t.options,n=i.length,c=0;n>c;c++)i[c].selected&&""!=i[c].value&&(""!=e&&(e+=","),e+=i[c].value);return e}function set_form_updated(){return $j("#upd_by").val($j("#userid").val()),$j("#upd_at").val(timestamp_now()),!0}function onRegFormSubmit(){$j("select.mselect").each(function(){$j("#"+this.id+"_data").val(pack_multi_select(this))}),$j(".checklist").each(function(){pack_checklist(this)}),$j("#upd_by").hasClass("disabled")||set_form_updated()}$j(document).ready(function(){$j("#admin_update").bind("click",function(){$j("#admin_update").attr("checked")&&set_form_updated()}),$j(".private").hide(),$j("select.mselect").each(function(){init_multi_select(this,$j("#"+this.id+"_data").val())}),$j(".checklist").each(function(){init_checklist(this)}),$j(".hideblank .contents").each(function(){$j(this).is(":not(:contains('@'))")&&$j(this).parent().hide()})});